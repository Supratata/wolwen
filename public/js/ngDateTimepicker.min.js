angular.module("jkuri.datepicker",[]).directive("ngDatepicker",["$document",function(a){var b=function(d,c){d.format=c.format||"YYYY-MM-DD";d.viewFormat=c.viewFormat||"Do MMMM YYYY";d.locale=c.locale||"fr";d.firstWeekDaySunday=d.$eval(c.firstWeekDaySunday)||false;d.placeholder=c.placeholder||""};return{restrict:"EA",require:"?ngModel",scope:{},link:function(g,e,d,j){b(g,d);g.calendarOpened=false;g.days=[];g.dayNames=[];g.viewValue=null;g.dateValue=null;moment.locale(g.locale);var c=moment();var f=function(l){var k=l.endOf("month").date(),q=l.month(),p=l.year(),r=1;var o=g.firstWeekDaySunday===true?l.set("date",2).day():l.set("date",1).day();if(o!==1){r-=o-1}g.dateValue=l.format("MMMM YYYY");g.days=[];for(var m=r;m<=k;m+=1){if(m>0){g.days.push({day:m,month:q+1,year:p,enabled:true})}else{g.days.push({day:null,month:null,year:null,enabled:false})}}};var h=function(){var k=g.firstWeekDaySunday===true?moment("2015-06-07"):moment("2015-06-01");for(var l=0;l<7;l+=1){g.dayNames.push(k.format("ddd"));k.add("1","d")}};h();g.showCalendar=function(){g.calendarOpened=true;f(c)};g.closeCalendar=function(){g.calendarOpened=false};g.prevYear=function(){c.subtract(1,"Y");f(c)};g.prevMonth=function(){c.subtract(1,"M");f(c)};g.nextMonth=function(){c.add(1,"M");f(c)};g.nextYear=function(){c.add(1,"Y");f(c)};g.selectDate=function(m,k){m.preventDefault();var l=moment(k.day+"."+k.month+"."+k.year,"DD.MM.YYYY");j.$setViewValue(l.format(g.format));g.viewValue=l.format(g.viewFormat);g.closeCalendar()};var i=["ng-datepicker","ng-datepicker-input"];if(d.id!==undefined){i.push(d.id)}a.on("click",function(m){if(!g.calendarOpened){return}var l=0,k;if(!m.target){return}for(k=m.target;k;k=k.parentNode){var o=k.id;var n=k.className;if(o!==undefined){for(l=0;l<i.length;l+=1){if(o.indexOf(i[l])>-1||n.indexOf(i[l])>-1){return}}}}g.closeCalendar();g.$apply()});j.$render=function(){var k=j.$viewValue;if(k&&k!='Invalid Date'){g.viewValue=moment(k).format(d.viewFormat);g.dateValue=k}else{g.viewValue=''}$('.inputrequired div input').attr('required', 'required');$('.nonactive div input').attr('disabled', 'disabled');$('.nonativetache div input').attr('disabled', 'disabled');}},template:'<div><input type="text" ng-focus="showCalendar()" ng-model="viewValue" class="ng-datepicker-input" placeholder="{{ placeholder }}"></div><div class="ng-datepicker" ng-show="calendarOpened">  <div class="controls">    <div class="left">      <i class="fa fa-backward prev-year-btn" ng-click="prevYear()"></i>      <i class="fa fa-angle-left prev-month-btn" ng-click="prevMonth()"></i>    </div>    <span class="date" ng-bind="dateValue"></span>    <div class="right">      <i class="fa fa-angle-right next-month-btn" ng-click="nextMonth()"></i>      <i class="fa fa-forward next-year-btn" ng-click="nextYear()"></i>    </div>  </div>  <div class="day-names">    <span ng-repeat="dn in dayNames">      <span>{{ dn }}</span>    </span>  </div>  <div class="calendar">    <span ng-repeat="d in days">      <span class="day" ng-click="selectDate($event, d)" ng-class="{disabled: !d.enabled}">{{ d.day }}</span>    </span>  </div></div>'}}]);
/*Time*/
angular.module("jkuri.timepicker",[]).directive("ngTimepicker",["$document",function(a){var b=function(a,b){var c=new Date;a.initTime=c.getHours()+":"+c.getMinutes(),a.step=b.step||"1",a.showMeridian=a.$eval(b.showMeridian)||!1,a.meridian=b.meridian||"AM",a.theme=b.theme||""};return{restrict:"EA",scope:!0,require:"?ngModel",link:function(c,d,e,f){b(c,e),c.opened=!1;var g=function(){var a=c.initTime.split(":");c.hour=a[0],c.minutes=a[1]},h=function(){var a;c.showMeridian?(a=c.hour+":"+c.minutes,c.viewValue=a+" "+c.meridian,a=i()+":"+c.minutes,f.$setViewValue(a)):(a=c.hour+":"+c.minutes,c.viewValue=a,f.$setViewValue(a))},i=function(){var a=parseInt(c.hour,10);return 12===c.hour&&"PM"===c.meridian?12:12===c.hour&&"AM"===c.meridian?"00":"PM"===c.meridian?a+12:parseInt(a,10)<10?"0"+a:a};c.$watch(e.ngModel,function(a){c.initTime=a,j()});var j=function(){if(c.initTime){var a=c.initTime.split(":");c.hour=a[0],c.minutes=a[1],a=c.hour+":"+c.minutes,c.viewValue=a,f.$setViewValue(a)}};c.showTimepicker=function(){c.opened=!0},c.incrementHour=function(){c.showMeridian?parseInt(c.hour,10)<12?(11===parseInt(c.hour,10)&&c.toggleMeridian(),c.hour=parseInt(c.hour,10)+1):12===parseInt(c.hour,10)&&(c.hour=1):parseInt(c.hour,10)<23?c.hour=parseInt(c.hour,10)+1:c.hour=0,parseInt(c.hour,10)<10&&(c.hour="0"+c.hour),h()},c.decreaseHour=function(){c.showMeridian?1===parseInt(c.hour,10)?c.hour=12:(12===parseInt(c.hour,10)&&c.toggleMeridian(),c.hour=parseInt(c.hour,10)-1):0===parseInt(c.hour,10)?c.hour=23:c.hour=parseInt(c.hour,10)-1,parseInt(c.hour,10)<10&&(c.hour="0"+c.hour),h()},c.incrementMinutes=function(){c.minutes=parseInt(c.minutes,10)+parseInt(c.step,10),c.minutes>59?(c.minutes="00",c.incrementHour()):parseInt(c.minutes,10)<10&&(c.minutes="0"+c.minutes),h()},c.decreaseMinutes=function(){c.minutes=parseInt(c.minutes,10)-parseInt(c.step,10),parseInt(c.minutes,10)<0&&(c.minutes=60-parseInt(c.step,10),c.decreaseHour()),0===parseInt(c.minutes,10)?c.minutes="00":parseInt(c.minutes,10)<10&&(c.minutes="0"+c.minutes),h()},c.toggleMeridian=function(){c.meridian="AM"===c.meridian?"PM":"AM",h()},a.on("click",function(a){d===a.target||d[0].contains(a.target)||c.$apply(function(){c.opened=!1})}),g(),h()},template:'<input type="text" ng-focus="showTimepicker()" ng-model="viewValue" class="ng-timepicker-input" ng-readonly="true"><div class="ng-timepicker" ng-show="opened" ng-class="{\'red\': theme === \'red\', \'green\': theme === \'green\', \'blue\': theme === \'blue\'}">  <table>    <tbody>    <tr>        <td class="act noselect" ng-click="incrementHour()"><i class="fa fa-angle-up"></i></td>        <td></td>        <td class="act noselect" ng-click="incrementMinutes()"><i class="fa fa-angle-up"></i></td>        <td class="act noselect" ng-click="toggleMeridian()" ng-show="showMeridian"><i class="fa fa-angle-up"></i></td>      </tr>      <tr>        <td><input type="text" ng-model="hour" ng-readonly="true"></td>        <td>:</td>        <td><input type="text" ng-model="minutes" ng-readonly="true"></td>        <td ng-show="showMeridian"><input type="text" ng-model="meridian" ng-readonly="true"></td>      </tr>      <tr>        <td class="act noselect" ng-click="decreaseHour()"><i class="fa fa-angle-down"></i></td>        <td></td>        <td class="act noselect" ng-click="decreaseMinutes()"><i class="fa fa-angle-down"></i></td><td class="act noselect" ng-click="toggleMeridian()" ng-show="showMeridian"><i class="fa fa-angle-down"></i></td>      </tr>  </table></div>'}}]);

